<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Big Map Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            background: #f0f0f0;
            touch-action: none;
        }
        
        #container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            cursor: grab;
            position: relative;
        }
        
        #container:active {
            cursor: grabbing;
        }
        
        #imageWrapper {
            transform-origin: 0 0;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        #imageWrapper img {
            display: block;
            pointer-events: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="imageWrapper">
            <img src="Big_Map_1.svg" alt="Big Map" id="mapImage">
        </div>
    </div>

    <script>
        const container = document.getElementById('container');
        const wrapper = document.getElementById('imageWrapper');
        const img = document.getElementById('mapImage');
        
        let scale = 0.5; // Start at 50% zoom
        const minScale = 0.01; // 1% minimum
        const maxScale = 1.0; // 100% maximum
        
        let posX = 0;
        let posY = 0;
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        
        // Touch handling for pinch-to-zoom
        let initialDistance = 0;
        let initialScale = scale;
        
        function updateTransform() {
            wrapper.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
        }
        
        // Initialize position (center the image at 50% zoom)
        img.onload = function() {
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            const imgWidth = img.naturalWidth * scale;
            const imgHeight = img.naturalHeight * scale;
            
            posX = (containerWidth - imgWidth) / 2;
            posY = (containerHeight - imgHeight) / 2;
            updateTransform();
        };
        
        // Mouse wheel zoom
        container.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            const rect = container.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            const newScale = Math.min(maxScale, Math.max(minScale, scale * delta));
            
            // Zoom toward mouse position
            const scaleChange = newScale / scale;
            posX = mouseX - (mouseX - posX) * scaleChange;
            posY = mouseY - (mouseY - posY) * scaleChange;
            
            scale = newScale;
            updateTransform();
        }, { passive: false });
        
        // Mouse drag
        container.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX - posX;
            startY = e.clientY - posY;
        });
        
        container.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            posX = e.clientX - startX;
            posY = e.clientY - startY;
            updateTransform();
        });
        
        container.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        container.addEventListener('mouseleave', () => {
            isDragging = false;
        });
        
        // Touch drag
        let touchStartX = 0;
        let touchStartY = 0;
        
        container.addEventListener('touchstart', (e) => {
            if (e.touches.length === 1) {
                touchStartX = e.touches[0].clientX - posX;
                touchStartY = e.touches[0].clientY - posY;
            } else if (e.touches.length === 2) {
                // Pinch zoom start
                const dx = e.touches[0].clientX - e.touches[1].clientX;
                const dy = e.touches[0].clientY - e.touches[1].clientY;
                initialDistance = Math.sqrt(dx * dx + dy * dy);
                initialScale = scale;
            }
        }, { passive: false });
        
        container.addEventListener('touchmove', (e) => {
            e.preventDefault();
            
            if (e.touches.length === 1) {
                // Drag
                posX = e.touches[0].clientX - touchStartX;
                posY = e.touches[0].clientY - touchStartY;
                updateTransform();
            } else if (e.touches.length === 2) {
                // Pinch zoom
                const dx = e.touches[0].clientX - e.touches[1].clientX;
                const dy = e.touches[0].clientY - e.touches[1].clientY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                const centerX = (e.touches[0].clientX + e.touches[1].clientX) / 2;
                const centerY = (e.touches[0].clientY + e.touches[1].clientY) / 2;
                
                const newScale = Math.min(maxScale, Math.max(minScale, initialScale * (distance / initialDistance)));
                
                const rect = container.getBoundingClientRect();
                const relX = centerX - rect.left;
                const relY = centerY - rect.top;
                
                const scaleChange = newScale / scale;
                posX = relX - (relX - posX) * scaleChange;
                posY = relY - (relY - posY) * scaleChange;
                
                scale = newScale;
                updateTransform();
            }
        }, { passive: false });
        
        // Prevent context menu
        container.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });
    </script>
</body>
</html>